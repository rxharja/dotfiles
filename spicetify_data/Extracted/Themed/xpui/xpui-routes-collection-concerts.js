(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[835],{55404:function(e,t,a){"use strict";a.r(t),a.d(t,{CollectionConcerts:function(){return I},default:function(){return x}});var c=a(27378),n=a.n(c),r=a(14298),o=a(47574),s=a(54798),l=a(7487),i=a(2028),u=a(28979),d=a(79308),m=a(35181),f=a(50878),g=a(66027),h=a(90849),b=a(41805),_=a(92132),p=a(63025),E=a(66422),y=a(56983),v=a(96816),L="collection-concerts-collectionConcerts-sectionContainer",N="collection-concerts-collectionConcerts-header",D="collection-concerts-collectionConcerts-concertsContainer",k=a(86268);const S={Online:m.ag.get("concerts_upcoming_virtual_events"),Recommended:m.ag.get("concerts_recommended_for_you"),Popular:m.ag.get("concerts_popular_near_you"),Playlists:m.ag.get("playlists")},w=r.jN0,C=e=>{var t,a;const{collection:c,concertMetadata:r,handleLocationChange:o}=e,s=(null===(t=c.concerts)||void 0===t?void 0:t.items)||[],u=null===(a=c.concerts)||void 0===a?void 0:a.isFetching,d=r.userLocation.name||m.ag.get("concerts.default_location"),g=e=>{if("playlist"===e.type)return n().createElement(E.Z,{entity:e});if(!e.concerts||!e.concerts.length)return null;if("online"===e.source&&(t=e.artists[0],["7mnBLXK823vNxN3UWB7Gfz","4f9iBmdUOhQWeP7dcAn1pf","2eam0iDomRHGBypaDQLwWI","3qnGvpP8Yth1AqSBMqON5x","3uwAm6vQy7kWPS2bciKWx9"].includes(t))){const t=(e=>{const t=e.filter((e=>"Virtual Event"===e.venue.name));let a=t[0],c=Math.abs(20-t[0].date.hour);return t.forEach((e=>{const t=Math.abs(20-e.date.hour);t<c&&(a=e,c=t)})),a})(e.concerts);return n().createElement(y.k,{entity:t,isVirtual:!0})}var t;const a=e.concerts[0];return n().createElement(y.k,{entity:a,isVirtual:"online"===e.source})};if(u)return n().createElement(l.h,{errorMessage:m.ag.get("error.request-browse-concerts-failure")});if(!s.length)return n().createElement(i.u,{title:m.ag.get("concerts.error.no_concerts_found_title"),message:m.ag.get("concerts.error.no_concerts_found_message",d)});return n().createElement("div",{className:D},n().createElement("div",{className:L},n().createElement(_.Z,{handleLocationChange:o,locationStr:d})),(()=>{const e=(e=>{const t={Online:[],Recommended:[],Popular:[],Playlists:r.playlists};return e.reduce(((e,t)=>("recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e)),t)})(s);return Object.keys(e).map(((t,a)=>{const c=e[t];return n().createElement("div",{key:t,className:L},n().createElement(f.ZP,{value:"headered-grid",index:a},n().createElement(v.P,{total:c.length,title:S[t],showAll:!0},c.map(g))))}))})())},I=n().memo((()=>{const e=(0,d.I0)(),t=(0,o.W6)(s.QD),a=(0,d.v9)((e=>e.entities.collection)),r=(0,d.v9)((e=>e.concerts)),l=r.userLocation.name||m.ag.get("concerts.default_location");(0,c.useEffect)((()=>{e((0,u.AJ)(null,t))}),[e,l,t]);const i=(0,k.Y)(w);return n().createElement("section",{className:N},n().createElement(g.gF,{size:g.fR.SMALL,backgroundColor:w},n().createElement(g.sP,null,n().createElement(g.xd,null,m.ag.get("concerts.label"))),n().createElement(h.W,null,n().createElement(b.i,{text:m.ag.get("concerts.label")}))),n().createElement(p.I,{backgroundColor:i}),n().createElement(C,{collection:a,concertMetadata:r,handleLocationChange:a=>{a&&a.geonameId&&e((0,u.AJ)(a.geonameId,t))}}))}));var x=I},56983:function(e,t,a){"use strict";a.d(t,{k:function(){return E}});var c=a(27378),n=a.n(c),r=a(62508),o=a(54220),s=a(99500),l=a(9807),i="concert-concertCard-ConcertCard",u="concert-concertCard-date",d="concert-concertCard-dateMonth",m="concert-concertCard-dateDay",f="concert-concertCard-metadata",g="concert-concertCard-title",h="concert-concertCard-location",b="concert-concertCard-fullDate",_="concert-concertCard-image",p=a(12622);const E=n().memo((e=>{const{entity:t,isVirtual:a}=e,{venue:{name:c,location:{name:E}}}=t,y=t.artists[0],v=(0,r.ij)(t),L=new Date(t.date.isoString);return n().createElement(o.r,{to:`/concert/${t.id}`,className:i},y.imageUri?n().createElement(s.Z,null,n().createElement("div",{"data-testid":"image-container",className:_,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${y.imageUri})`}})):null,n().createElement("time",{className:u,dateTime:t.date.isoString},n().createElement(l.Dy.h5,{variant:l.$e.minuetBold,className:d},(0,r.lJ)(L)),n().createElement(l.Dy.h1,{variant:l.$e.canon,className:m},L.getDate())),n().createElement("div",{className:f,dir:"auto"},n().createElement(l.Dy.h2,{className:b,variant:l.$e.minuetBold},(0,p.FO)(L),", ",(0,r.b8)(L)),n().createElement(l.Dy.h2,{variant:l.$e.cello,weight:l.vS.bold,className:g},v),n().createElement(l.Dy.h2,{className:h,variant:l.$e.mesto,"data-testid":"location-name"},a?c:`${c}, ${E}`)))}))},92132:function(e,t,a){"use strict";a.d(t,{Z:function(){return E}});a(23615);var c=a(27378),n=a.n(c),r=a(76654),o=a(60042),s=a.n(o),l=a(20476),i=a(35181),u=a(59650),d=a(94465),m=a(13737),f=a(9807),g={locationContainer:"artist-concertLocation-locationContainer",locationName:"artist-concertLocation-locationName",clearSuggestions:"artist-concertLocation-clearSuggestions",hide:"artist-concertLocation-hide",changeLocation:"artist-concertLocation-changeLocation",changeLocationDropdown:"artist-concertLocation-changeLocationDropdown",changeLocationInputLabel:"artist-concertLocation-changeLocationInputLabel",changeLocationInput:"artist-concertLocation-changeLocationInput",searchInputSearchIcon:"artist-concertLocation-searchInputSearchIcon",changeLocationLabel:"artist-concertLocation-changeLocationLabel",changeLocationList:"artist-concertLocation-changeLocationList",changeLocationError:"artist-concertLocation-changeLocationError",changeLocationLink:"artist-concertLocation-changeLocationLink",changeLocationItem:"artist-concertLocation-changeLocationItem",button:"artist-concertLocation-button",locationLink:"artist-concertLocation-locationLink"};const h="location_no_results",b="location_fetch_error",_={[h]:i.ag.get("concert.error.no_locations_found_subtitle"),[b]:i.ag.get("concert.error.general_error_title")},p=e=>{const t=n().createRef(),a=n().createRef(),[o,p]=(0,c.useState)(""),[E,y]=(0,c.useState)(-1),[v,L]=(0,c.useState)([]),[N,D]=(0,c.useState)(null),{placeholder:k,onSelectLocation:S,hideLocationSelector:w}=e,C=(0,l.D)((()=>{d.LH.fetchLocationQuery(u.b.getInstance(),o).then((e=>{const{body:{results:t=[]}={}}=e;L(t),t.length?D(null):D(h)}),(()=>{L([]),D(b)}))}))(250),I=e=>{p(e),y(-1),L([]),D(null),e&&e.length>1&&C(e)};let x=s()(g.clearSuggestions,g.hide);return(v&&v.length||N===h)&&(x=g.clearSuggestions),n().createElement("div",{className:g.changeLocation,"data-interaction-context":"location-selector"},n().createElement("div",{className:g.changeLocationDropdown,onKeyDown:e=>{const c=38,n=40,r=27,o=9,s=e.which;let l=E;switch([r,n,c,o].indexOf(s)>-1&&e.preventDefault(),s){default:return;case r:return void S(null);case c:l=Math.max(E-1,-1);break;case n:case o:l=Math.min(E+1,v.length-1);break;case 13:S(v[E])}if(l<0)t.current.focus();else{const e=a.current.childNodes[l];e&&e.focus()}y(l)},role:"searchbox",onBlur:e=>{e.relatedTarget||(I(""),w())}},n().createElement("div",{className:g.changeLocationForm},n().createElement("div",{className:s()(g.changeLocationLabel,"spoticon-search-16")},n().createElement("input",{className:g.changeLocationInput,type:"search",id:"change-location-input",placeholder:k,value:o,onChange:e=>I(e.target.value),ref:t,"aria-label":k,autoFocus:!0}),n().createElement("button",{className:x,"aria-label":i.ag.get("search.a11y.clear-input"),onClick:()=>I("")},n().createElement(m.Z,{size:16})))),n().createElement("ol",{className:g.changeLocationList,ref:a},N&&n().createElement(f.Dy.li,{className:g.changeLocationError},n().createElement("span",{className:"spoticon spoticon-warning-16"})," ",_[N]),v&&v.length&&v.map(((e,t)=>n().createElement(f.Dy.li,{weight:f.vS.book,key:t,className:g.changeLocationItem,tabIndex:t+1},n().createElement(r.rU,{to:"#",className:g.changeLocationLink,onClick:()=>S(e),role:"button"},e.location))))||null)))};var E=e=>{const{handleLocationChange:t,locationStr:a}=e,[r,o]=(0,c.useState)(!1);return n().createElement("div",{className:g.locationContainer},n().createElement(f.Dy.h1,{variant:f.$e.alto},i.ag.get("concerts_shows_in")),n().createElement("span",null,r&&n().createElement(p,{placeholder:i.ag.get("concerts.input.search_placeholder"),onSelectLocation:e=>{t(e),o(!1)},hideLocationSelector:()=>o(!1)}),!r&&n().createElement(f.Dy.h2,{variant:f.$e.alto,className:g.locationName,dir:"auto",onClick:o,role:"button"},a)))}},62508:function(e,t,a){"use strict";a.d(t,{Ms:function(){return n},b8:function(){return r},lJ:function(){return o},NL:function(){return s},O1:function(){return l},Yl:function(){return d},ij:function(){return m}});var c=a(35181);const n=e=>c.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}),r=e=>c.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),o=e=>c.ag.formatDate(e,{month:"short"}).toUpperCase(),s=e=>c.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase(),l=e=>e<new Date,i={row:{1:e=>c.ag.get("concert.header.entity_title_1",...e),2:e=>c.ag.get("concert.header.entity_title_2",...e),3:e=>c.ag.get("concert.header.entity_title_3",...e),4:e=>c.ag.get("concert.header.entity_title_4",...e),more:e=>c.ag.get("concert.header.entity_title_more",...e)},entity:{1:e=>c.ag.get("concert.header.upcoming_concert_title_1",...e),2:e=>c.ag.get("concert.header.upcoming_concert_title_2",...e),3:e=>c.ag.get("concert.header.upcoming_concert_title_3",...e),4:e=>c.ag.get("concert.header.upcoming_concert_title_4",...e),more:e=>c.ag.get("concert.header.upcoming_concert_title_more",...e)}},u=(e,t)=>{const a=i[t],c=(e=>{try{return e.festival&&e.title?{title:e.title}:{artists:e.artists.map((e=>e.name||e.profile.name))}}catch(e){return null}})(e);if(c){if(c.title)return c.title;if(c.artists)return c.artists.length>4?a.more(c.artists):a[c.artists.length](c.artists)}return""},d=e=>u(e,"row"),m=e=>u(e,"entity")},2028:function(e,t,a){"use strict";a.d(t,{u:function(){return h}});var c=a(27378),n=a.n(c),r=a(60042),o=a.n(r),s=a(9807),l=a(64954),i="x-emptyState-container",u="x-emptyState-renderInline",d="x-emptyState-button",m="x-emptyState-title",f="x-emptyState-subtitle",g=a(99498);const h=n().memo((e=>{const{children:t,message:a,title:c,linkTitle:r,linkTo:h,onClick:b,renderInline:_=!1}=e,{isXSOnly:p,isSMOnly:E}=(0,g.e)(),y=p||E;return n().createElement("section",{className:o()(i,{[u]:_})},t,n().createElement(s.Dy.h1,{variant:y?s.Dy.cello:s.Dy.alto,className:m},c),n().createElement(s.Dy,{variant:y?s.Dy.mesto:s.Dy.ballad,className:f},a),r&&(h||b)&&n().createElement(l.z,{version:"secondary",className:d,linkTo:h,onClick:b},r))}))}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map