(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[289],{24209:function(e,t,a){"use strict";a.d(t,{Q:function(){return c},$:function(){return l}});var n=a(27378),s=a.n(n),i=a(94744),r=a(2315);const c=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:r.oT.ADDED_AT}),l=s().memo((({uri:e,children:t,defaultSortOption:a})=>s().createElement(i.r,{uri:e,defaultState:a,sortContext:c},t)))},4666:function(e,t,a){"use strict";a.d(t,{E:function(){return m}});var n=a(27378),s=a.n(n),i=a(57660),r="collection-searchBar-searchBar",c=a(87405),l=a(6953),o=a(2315),d=a(24209);const u=s().memo((({sortOptions:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(d.Q),i=(0,n.useCallback)((e=>{a(o.ei[e])}),[a]),r=e.map((e=>o.MY[e])),c=o.MY[t];return s().createElement(l.A,{options:r,onSelect:i,selected:c})})),m=s().memo((({filterPlaceholder:e,sortOptions:t})=>{const a=(0,n.useContext)(i.H);return s().createElement("div",{className:r},null!=a&&a.getCapabilities().canFilter?s().createElement(c.K,{placeholder:e}):null,null!=a&&a.getCapabilities().canSort?s().createElement(u,{sortOptions:t}):null)}))},38489:function(e,t,a){"use strict";a.d(t,{K:function(){return C}});var n=a(27378),s=a.n(n),i=a(60042),r=a.n(i),c=a(11700),l="show-shareButton-button",o=a(35181),d=a(60854),u=a(70608),m=a(91592),f=a(86131);const p=s().memo((({onClick:e=(()=>{}),size:t=24,className:a,uri:i,sharingInfo:c,interactionData:p})=>{const{onCopyLink:b}=(0,m.y)({sharingInfo:c,uri:i,interactionData:p}),g=(0,n.useCallback)((()=>{b(),e()}),[e,b]);return s().createElement(f.u,{label:o.ag.get("mwp.list.item.share")},s().createElement(u.E,{ariaLabel:o.ag.get("mwp.list.item.share"),size:t,onClick:g,className:r()(l,a)},s().createElement(d.M,{iconSize:t})))}));var b=a(21723),g=a(34834),E=a(885),h=a(21380),y=a(91486);const v={intent:"share",type:"click",itemIdSuffix:"contextmenu/episode/share"},C=s().memo((({episodeUri:e,showUri:t,sharingInfo:a,canDownload:i})=>{const{useDownloading:l}=(0,n.useContext)(E.I),{currentAvailability:o}=l(e),d=[h.V8.YES,h.V8.DOWNLOADING,h.V8.WAITING].includes(o),u=(0,n.useMemo)((()=>s().createElement(g.p,{uri:e,size:g.q.sm,showUri:t,className:r()({[c.Z.visibleDownloadButton]:d})})),[e,t,d]),m=(0,n.useMemo)((()=>s().createElement(p,{uri:e,sharingInfo:a,interactionData:v})),[e,a]),f=(0,n.useMemo)((()=>s().createElement(b.w,{uri:e,size:y.q.sm,className:c.Z.saveButton})),[e]);return s().createElement(s().Fragment,null,m,i&&u,f)}))},65898:function(e,t,a){"use strict";a.r(t),a.d(t,{YourEpisodes:function(){return V},YourEpisodesContainer:function(){return X},default:function(){return J}});var n=a(27378),s=a.n(n),i=a(47059),r=a(35181),c=a(57660),l=a(7487),o=a(66027),d=a(90849),u=a(41805),m=a(8621),f=a(26425),p=a(34159),b=a(92270),g=a(82229),E=a(50878),h=a(58324),y=a(49022),v=a(2124),C=a(88319),w=a(12275),x=a(18237),k=a(38489),P=a(49107),S=a(27272),O=a(88886),D=a(25227),I=a(89614),N=a(885),U=a(48010),_=a(83509),M=a(64619),A=a(18291),L=a(70266),R=a(73088);const T={small:64,standard:300,large:640,xlarge:1024},B=s().memo((({index:e,contextUri:t,episode:a,onRemove:i,usePlayContextItem:r})=>{var c,l,o,d;const u=(0,n.useRef)(a.duration.milliseconds-a.timeLeft.milliseconds),m=a.uri,[f,p]=(0,n.useState)(0===a.timeLeft.milliseconds),b=(0,h.O1)(),g=(0,P.jh)(),B=(0,C.o)(),[$]=(0,I.Z)(m,!0),{useCurrentAvailability:z}=(0,n.useContext)(N.I),[Z]=z(m),j=(0,_.k)(),G=(0,A.Y)((e=>{var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===a.uri){const t=(null==e?void 0:e.position)||0;return u.current=t,t}return 0}),0),{isPlaying:Y,isActive:q,togglePlay:F}=r({uri:m,index:e}),{isPlaying:H,isActive:K,togglePlay:W}=(0,U.n)({uri:m,pages:[{items:[{type:M.p.EPISODE,uri:m,uid:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,n.useEffect)((()=>{$||i()}),[$,i]);const Q=(0,n.useCallback)((()=>{B({type:"click",targetUri:m,intent:"navigate"})}),[m,B]),V=(0,n.useCallback)((()=>{j?(B({type:"click",intent:Y?"pause":"play"}),F()):(B({type:"click",intent:H?"pause":"play"}),W())}),[j,Y,H,B,F,W]),X=null!==(c=null===(l=a.podcastSubscription)||void 0===l?void 0:l.isPaywalled)&&void 0!==c&&c,J=null!==(o=null===(d=a.podcastSubscription)||void 0===d?void 0:d.isUserSubscribed)&&void 0!==o&&o,{badges:ee}=(0,L.r)({isExplicit:a.isExplicit,isPaywalled:X});let te="";return(q||!j&&K)&&(te=m),$?s().createElement(E.ZP,{value:"row",index:e},s().createElement(w._,{menu:s().createElement(x.k,{uri:m,showUri:a.show.uri,isPlayed:f,onMarkAsPlayed:p})},s().createElement(y.X,{index:e,uri:m,uid:m,size:g,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?T[e.label]:null),height:e.height||(e.label?T[e.label]:null)}))),isPaywalled:X,isUserSubscribed:J,name:a.name,showName:a.show.name,showUri:a.show.uri,description:a.description,isPlayable:a.isPlayable&&Z,fullyPlayed:f,durationMs:a.duration.milliseconds,releaseDate:a.release.date.toString()||"",resumePositionMs:u.current,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} Â· ${a.show.name}`;b(e,[m],n,t)},handlePlaybackClick:V,handleClick:Q,activeTrackUri:te,isPlaying:j?Y:H,position:G,badges:s().createElement(s().Fragment,null,ee.explicit&&s().createElement(v.N,null),ee.paid&&s().createElement(R.g,null)),playButtonWrapper:e=>s().createElement(D.l,{enabled:X&&!J},e),actionButtons:s().createElement(k.K,{episodeUri:m,sharingInfo:null,showUri:a.show.uri,canDownload:!X||X&&J}),topActionButtons:s().createElement(O.y,{menu:s().createElement(x.k,{uri:m,showUri:a.show.uri,isPlayed:f,onMarkAsPlayed:p})},s().createElement(S.z,{size:S.q.sm}))}))):null}));var $=a(20107),z=a(2315),Z=a(24209),j=a(18499);const G=s().memo((({contextUri:e,usePlayContextItem:t})=>{const a=(0,n.useContext)(c.H),{sortState:i}=(0,n.useContext)(Z.Q),r=(0,n.useRef)(0),{filter:l}=(0,n.useContext)(j.fo),o=(0,n.useCallback)((async(e,t)=>{const n=await a.getEpisodes({offset:e-r.current,limit:t,sort:(0,z.sv)(i),filter:(0,z.$u)(l)});return r.current=0,((e,t)=>{const a=t+e.items.length;return{totalCount:e.totalLength,items:e.items,pagingInfo:{nextOffset:a<e.totalLength?a:null}}})(n,e)}),[l,a,i]),d=(0,n.useCallback)((()=>{r.current++}),[]),u=(0,n.useCallback)(((a,n)=>s().createElement(B,{key:`${a.uri}/${n}`,index:n,episode:a,contextUri:e,onRemove:d,usePlayContextItem:t})),[e,d,t]),{ref:m,breakpoint:f}=(0,P.Db)({[P.Uo.MEDIUM]:0,[P.Uo.LARGE]:600});return s().createElement(P.ZU.Provider,{value:f},s().createElement(E.ZP,{value:"track-list"},s().createElement($.k,{showUri:"",ref:m,renderRow:u,fetchEpisodes:o})))}));var Y=a(51955),q=a(72136),F=a(68657),H=a(4666),K=a(2028),W=a(11847),Q=a(27577);const V=({metadata:e,canSort:t})=>{const a=(0,g.Y5)("#006450"),{sortState:c}=(0,n.useContext)(Z.Q),{filter:l}=(0,n.useContext)(j.fo),b=(0,_.k)(),{isPlaying:E,togglePlay:h,usePlayContextItem:y}=(0,U.n)({uri:e.uri,metadata:{[Y.sb.SORTING_CRITERIA]:(0,z._s)(c),[Y.sb.FILTERING_PREDICATE]:(0,W.aK)(l)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),v=()=>h(),{uri:C,name:w,images:x,totalLength:k,owner:P}=e,S=(0,n.useMemo)((()=>({id:P.username,uri:P.uri,name:P.username,displayName:P.displayName||void 0,images:P.images||[]})),[P]),O=e.totalLength>0;return s().createElement("section",{className:Q.Z.yourEpisodes,"data-testid":"your-episodes-page"},s().createElement(o.gF,{backgroundColor:a},s().createElement(d.W,null,s().createElement(f.$,{size:p.qE.sm,onClick:v,isPlaying:E,uri:C,disabled:!b}),s().createElement(u.i,{text:w})),s().createElement(o.Oz,{images:x,name:w,shape:q.K.ROUNDED_CORNERS,renderImage:()=>s().createElement(F.$,null)}),s().createElement(o.sP,null,s().createElement(o.dy,{small:!0,uppercase:!0},r.ag.get("playlist")),s().createElement(o.xd,{canEdit:!1,onClick:()=>{},className:Q.Z.playlistTitle},w),s().createElement(o.QS,{creators:[S],totalEpisodes:k}))),s().createElement("div",{className:Q.Z.yourEpisodesContentWrapper},s().createElement(m.o,{backgroundColor:a},s().createElement(m.F,null,O&&s().createElement(f.$,{onClick:v,isPlaying:E,size:p.qE.lg,uri:C,disabled:!b}),t&&s().createElement("div",{className:Q.Z.searchBoxContainer},s().createElement(H.E,{filterPlaceholder:r.ag.get("playlist.search_in_playlist"),sortOptions:z.$2})))),s().createElement("div",{className:"contentSpacing"},e.totalLength>0&&s().createElement(G,{contextUri:C,usePlayContextItem:y}))),0===e.totalLength&&s().createElement("div",{className:"contentSpacing"},s().createElement(K.u,{message:r.ag.get("collection.empty-page.episodes-subtitle"),title:r.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:r.ag.get("collection.empty-page.shows-cta"),renderInline:!0},s().createElement(i.Z,null))))},X=s().memo((()=>{const e=(0,n.useContext)(c.H).getCapabilities(),t=(0,b.x)();return t?s().createElement(Z.$,{uri:t.uri,defaultSortOption:z.oT.ADDED_AT},s().createElement(j.hz,{uri:t.uri},s().createElement(V,{metadata:t,canSort:e.canSort&&t.totalLength>0}))):s().createElement(l.h,{errorMessage:r.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}));var J=X},49022:function(e,t,a){"use strict";a.d(t,{X:function(){return y}});var n=a(27378),s=a.n(n),i=a(76654),r=a(48529),c=a(66917),l=a.n(c),o=a(60042),d=a.n(o),u={episodeBlock:"show-episodeBlock-episodeBlock",isActive:"show-episodeBlock-isActive",title:"show-episodeBlock-title",titleLink:"show-episodeBlock-titleLink",selected:"show-episodeBlock-selected",topActions:"show-episodeBlock-topActions",actions:"show-episodeBlock-actions",noHover:"show-episodeBlock-noHover",imageContainer:"show-episodeBlock-imageContainer",showImage:"show-episodeBlock-showImage",description:"show-episodeBlock-description",metadata:"show-episodeBlock-metadata",badges:"show-episodeBlock-badges",medium:"show-episodeBlock-medium",large:"show-episodeBlock-large",header:"show-episodeBlock-header",descriptionContainer:"show-episodeBlock-descriptionContainer",playerActions:"show-episodeBlock-playerActions"},m=a(34159),f=a(9807),p=a(93261),b=a(64619),g=a(72136),E=a(21311),h=a(49107);const y=s().memo((({uri:e,name:t,showName:a,showUri:c,size:o,description:y,durationMs:v,images:C,badges:w,fullyPlayed:x,releaseDate:k,resumePositionMs:P,activeTrackUri:S,isPlaying:O,actionButtons:D,topActionButtons:I,onContextMenu:N,onTouchStart:U,onTouchEnd:_,handlePlaybackClick:M,handleDragStart:A,handleClick:L,position:R,index:T,isPlayable:B,isPaywalled:$,isUserSubscribed:z,playButtonWrapper:Z=null})=>{var j;const G=(0,r.k6)(),Y=S===e,q=Y&&O,F=l().from(e).toURLPath(!0),H=null===(j=l().from(c))||void 0===j?void 0:j.toURLPath(!0),K=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),G.push(F),L&&L(e)}),[F,G,L]),W=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),H&&G.push(H)}),[H,G]),Q=$&&!z,V=(0,n.useCallback)((e=>{e.stopPropagation(),Q||M(e)}),[M,Q]),X=e=>{e.stopPropagation()},J=Q||B,ee=s().createElement(m.JM,{size:m.qE.xs,version:m.ul.secondary,onClick:V,isPlaying:q,disabled:!J,locked:Q}),te=Z?Z(ee):ee;return s().createElement("div",{className:d()(u.episodeBlock,{[u.isActive]:Y,[u.medium]:o===h.Uo.MEDIUM,[u.large]:o===h.Uo.LARGE,[u.noHover]:o===h.Uo.XSMALL}),"data-testid":`episode-${T}`,draggable:!!A,onDragStart:A,onClick:K,onContextMenu:N,onTouchStart:U,onTouchEnd:_},s().createElement("div",{className:u.imageContainer},s().createElement(g.O,{className:d()(u.entityImage,u.showImage),type:b.p.EPISODE,size:(e=>{switch(e){case h.Uo.LARGE:return E.m$.SIZE_112;case h.Uo.MEDIUM:return E.m$.SIZE_64;default:return E.m$.SIZE_48}})(o),title:t,shape:g.K.ROUNDED_CORNERS,images:C})),s().createElement("div",{className:u.header},s().createElement(i.rU,{className:u.titleLink,to:F,onClick:K},s().createElement(f.Dy.h4,{variant:f.Dy.balladBold,className:u.title},t)),a&&H&&s().createElement(i.rU,{className:u.titleLink,to:H,onClick:W},s().createElement(f.Dy.h4,{variant:f.Dy.mestoBold,className:u.title},a))),s().createElement("div",{className:u.descriptionContainer},s().createElement(f.Dy.p,{variant:f.Dy.mesto,className:u.description},y)),s().createElement("div",{className:u.metadata},s().createElement("div",{className:u.badges},w),s().createElement(p.E,{isPlaying:q,fullyPlayed:x,durationMs:v,releaseDate:k,resumePositionMs:P,position:Y?R:void 0})),I&&s().createElement("div",{onClick:X,className:u.topActions},I),s().createElement("div",{onClick:X,className:u.actions},D),s().createElement("div",{className:u.playerActions},te))}))},20107:function(e,t,a){"use strict";a.d(t,{k:function(){return f}});var n=a(65526),s=a.n(n),i=a(27378),r=a.n(i),c="show-episodeList-divider",l="show-episodeList-row",o=a(93868),d=a(19873);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const f=r().memo(r().forwardRef(((e,t)=>{const{fetchEpisodes:a,renderRow:n,limit:s=50,showUri:u}=e,[f,p]=(0,i.useState)(d.d),b=(0,i.useRef)(!1),g=(0,i.useCallback)(((e=!1)=>{if(!a)return;const t=f.pagingInfo.nextOffset;if(null===t)return;const n=0===f.totalCount?s:Math.min(f.totalCount-t,s);b.current||(b.current=!0,a(t,n).then((a=>{p((n=>{const s=e?[]:[...n.items];return s.splice(t,a.items.length,...a.items),m(m({},a),{},{items:s})})),b.current=!1})))}),[a,f.pagingInfo.nextOffset,f.totalCount,s]);return(0,i.useEffect)((()=>{p(d.d)}),[u,a]),(0,i.useEffect)((()=>{0===f.pagingInfo.nextOffset&&g(!0)}),[g,f.pagingInfo.nextOffset]),r().createElement("div",{ref:t},r().createElement(o.C,{onReachBottom:g,triggerOnInitialLoad:!0},f.items.map(((e,t)=>r().createElement("div",{className:l,key:`${t}${e.uid}`},r().createElement("hr",{className:c,"aria-hidden":!0}),n(e,t))))))})))},11700:function(e,t){"use strict";t.Z={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",ShowPage:"show-show-ShowPage",ShowContent:"show-show-ShowContent",metadata:"show-show-metadata",episodes:"show-show-episodes",episodesHeader:"show-show-episodesHeader",episodesSort:"show-show-episodesSort",subtitle:"show-show-subtitle",sectionTitle:"show-show-sectionTitle",trailer:"show-show-trailer",visibleDownloadButton:"show-show-visibleDownloadButton",moreButton:"show-show-moreButton",saveButton:"show-show-saveButton"}}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map